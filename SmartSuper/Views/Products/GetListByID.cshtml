@model IEnumerable<SmartSuper.Models.Products>

@{
    ViewBag.Title = "GetListByID";
}

<h2>רשימת המוצרים מסוג המוצר הנבחר</h2>

@section scripts{

    <script type="text/javascript">

        $(document).ready(function () {
         $('#Product').autocomplete({
             source: '@Url.Action("GetProduct")'
         });
        });

        $(document).ready(function () {
            $(".addProdrctToCart").click(function () {
                var button = $(this);

                $.ajax({
                    url: '/Products/addProdrctToCart',
                    type: 'Post',
                    dataType: 'Json',
                    data: { albumId: $(this).parent().attr("id") },
                    success: (function (result) {

                        $(button).text("נוסף לסל");
                        $(button).removeClass("addProdrctToCart");
                        $(button).addClass("inCart");
                        $(button).attr("disabled", "disabled");
                    }),
                    error: (function (xhr, status) {
                        alert(status);
                    })
                });
            });
        });

    </script>
}

@{var user = (SmartSuper.Models.Customers)HttpContext.Current.Session["user"];}

@using (Html.BeginForm("GetListByID", "Product", FormMethod.Post))
{
    <label>חיפוש : </label>
    <div>
        <input type="text" name="Product" id="Product" />
        <input type="submit" name="שלח" value="חפש" />
    </div>
}

@if (user != null && user.FirstName == "admin")
{
    <p>
        @Html.ActionLink("יצירת מוצר חדש", "Create")
    </p>
}

<table class="table">
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.ProductType_ID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.FoodCompany_ID)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Weight)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price_For_100_Gram)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Deal_Bool)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Price_For_100_Gram_In_Deal)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Condition_For_Deal)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Amount_Condition_For_Deal)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr class="tableRow">
        <td>
            @Html.DisplayFor(modelItem => item.ProductType_ID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.FoodCompany_ID)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Weight)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price_For_100_Gram)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Deal_Bool)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Price_For_100_Gram_In_Deal)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Condition_For_Deal)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Amount_Condition_For_Deal)
        </td>
        <td>

            @if (true)
            {
                <button type="button" disabled="disabled" class="inCart" id="inCart">נוסף לסל</button>
            }
            else
            {
                <button type="button" class="addProdrctToCart" id="addProdrctToCart">הוספה לסל</button>
            }
        </td>
        <br />

        <td>
            @if (user != null && user.FirstName == "admin")
            {
                <text>|</text>
                @Html.ActionLink("עריכה", "Edit", new { id = item.ID }) <text>|</text>
                @Html.ActionLink("מחיקת מוצר", "Delete", new { id = item.ID })
            }
        </td>
    </tr>
}

</table>
